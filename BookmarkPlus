== Bookmark+ ==


This page is about library '''<tt>[[bookmark+.el]]</tt>''', which enhances vanilla Emacs [[bookmark]]s in many ways. 

The internal bookmark format (data structure) used by '''Bookmark+''' is compatible with that of vanilla GnuEmacs. It extends that structure in new ways, to accommodate new bookmark types.



=== Bookmark Any Buffer, Not Just a File ===

In vanilla Emacs, you can bookmark a position in any file, including files of special types, such as [[InfoMode|Info]], DocView (PDF), an image, or a [[Gnus]] article.

With '''Bookmark+''', you can also bookmark a position (or a [[region]] -- see [[#BookmarkRegion]], below) in ''any'' buffer. When you jump to such a non-file bookmark, an attempt is made to re-create the buffer if it is not already open.



[:BookmarkRegion]
=== Regions, Not Just Single Positions ===

A vanilla Emacs bookmark records a single position somewhere. With '''Bookmark+''', you can record a region, that is, two positions (in the same document). If the region is active (and non-empty) when you set a bookmark, then the region information is automatically saved as part of the bookmark.

When you then jump to a bookmark that records a region, the region is activated automatically, provided user option '''`bookmark-use-region-flag'''' is non-`nil' (which it is by default). You can also flip the option value temporarily when you visit a bookmark, by using a [[prefix argument]].



=== Better Bookmark Relocation, Saving Updated Location ===

Just as is the case for vanilla Emacs bookmarks, '''Bookmark+''' relocates bookmark positions when you visit them, if they have moved because the surrounding text has changed since they were recorded. This applies also to bookmarks with regions (two positions).

This relocation is more robust than the relocation for vanilla Emacs bookmarks: the new location is found correctly more often. In the case of a bookmark with a region, the region text, like the surrounding text, can be modified and the bookmark will typically be relocated correctly. 

By default, when you visit a bookmark that requires relocation, the bookmark is then saved with the new, relocated position information. If you want to turn off this automatic saving, just customize user option '''`bookmark-save-new-location-flag'''' to `nil'.



=== Highlighting of Different Bookmark Types ===

In '''Bookmark+'''', bookmarks are highlighted in the bookmark list (`bookmark-bmenu-list', `C-x r l'), to indicate their type:

* non-file buffers
* local files with regions
* local files without regions
* local directories
* remote files or directories
* remote files or directories that must be accessed by `su' or `sudo' (`root')
* w3m URLs
* Info nodes
* Gnus articles

Bookmarked remote files or directories that must be accessed using `su' or `sudo' are highlighted differently before you access them. After they are accessed, they are highlighted like other remote files or directories.




=== Marking and Unmarking ===

'''Bookmark+''' enhances marking and unmarking in several ways.  In
general, these enhancements are similar to features offered by
[[DiredMode|Dired]] and [[Dired X]].

* You can use '''`##%m##'''' to mark bookmarks whose names match a regexp.

* You can use '''`M-DEL'''' (or '''`U'''') to unmark all bookmarks or all that
   are marked `##>##' or all that are flagged `D'.

* You can use '''`t'''' to toggle (swap) marked and unmarked bookmarks:
   the marked become unmarked, and vice versa.

* You can use '''`##>##'''' to show only the marked bookmarks or '''`##<##'''' to show
   only the unmarked bookmarks.  Repeat to show all again.




=== Hiding and Showing Bookmarks ===

You can hide and show different sets of bookmarks in the menu
list (`C-x r l').  There are commands to show only bookmarks of a particular
type (e.g. `I' to show only Info bookmarks).  And you can
show only the marked or only the unmarked bookmarks (using `##>##' and
`##<##').

Commands that operate on the current bookmark or on the marked or
the unmarked bookmarks act only on bookmarks that are displayed
(not hidden).  This includes the commands that mark or unmark
bookmarks.  This means that you can easily define any given set of
bookmarks.

For example:

# Use `F' to show only bookmarks associated with files.
# Use `%m' to mark those whose names match a particular [[regexp]].
# Use `R' to show only bookmarks that have regions.
# Use `m' to mark some of those region bookmarks.
# Use `##.##' to show all bookmarks.
# Use `t' to swap marked and unmarked (so unmarked are now marked)
# Use `D' to delete all of the marked bookmarks (after confirming)

That deletes all file bookmarks that match the regexp and all
region bookmarks that you selectively marked.

These are the keys for hiding or showing bookmarks:

* '''`##.##'''' -- Show all bookmarks.

* `B' -- Show only non-file (e.g. buffer) bookmarks.

* `F' -- Show only file (including directory) bookmarks. With a [[prefix argument]], hide remote-file bookmarks.

* `G' -- Show only Gnus bookmarks.

* `I' -- Show only Info bookmarks.

* `R' -- Show only bookmarks with region information.

* `W' -- Show only W3M bookmarks.

* '''`##>##'''' -- Toggle showing only marked bookmarks

* '''`##<##'''' -- Toggle showing only unmarked bookmarks






=== Sorting Bookmarks ===

Bookmarks shown in the menu list (`C-x r l') are sorted using the current
value of option '''`bookmark-sort-function''''.  (If `nil', they are
unsorted.)

You can use '''`##s s##''''... (repeat hitting the `s' key) to cycle among
the various sort orders possible.  By default, all available sort
orders are cycled, but you can shorten the cycling list by
customizing option '''`bookmarkp-sort-orders-for-cycling-alist''''.

You can also change directly to one of the main sort orders
(without cycling) using '''`##s n##'''', '''`##s f n##'''', etc.:

* '''`##s b##'''' -- Sort by last buffer or file access.
* '''`##s g##'''' -- Sort by Gnus thread: group, article, message.
* '''`##s i##'''' -- Sort by Sort by Info manual, node, position
* '''`##s k##'''' -- Sort by bookmark type
* '''`##s n##'''' -- Sort by bookmark name
* '''`##s t##'''' -- Sort by last bookmark access time
* '''`##s v##'''' -- Sort by visit frequency
* '''`##s w##'''' -- Sort by W3M URL
* '''`##s f d##'''' -- Sort by local file type: file, symlink, dir
* '''`##s f n##'''' -- Sort by file name
* '''`##s f s##'''' -- Sort by local file size
* '''`##s f t##'''' -- Sort by last local file access
* '''`##s f u##'''' -- Sort by last local file update (edit)


You can reverse the current sort direction (ascending/descending)
using '''`##s r##''''.

Remember that you can combine sorting with hiding/showing
different sets of bookmarks -- bookmarks of different kinds
(e.g. Info) or bookmarks that are marked or unmarked.

Finally, you can easily define your own sorting commands and sort
orders.  See macro '''`bookmarkp-define-sort-command'''' and the
documentation for option `bookmarkp-sort-comparer'.








=== Use Any Emacs Version ===

'''Bookmark+''' fixes things so you can use bookmarks that were created with any Emacs version in any other Emacs version. In particular, it lets you use Emacs prior to release 23 with bookmarks created using Emacs 23 (or created using any older version).


=== Gnus, W3M ===

* '''Bookmark+''' lets you use the normal bookmarking commands to bookmark Gnus articles -- no need for special Gnus-specific key bindings. Also, the same bookmark data structure (in ##.emacs.bmk##) is used to store Gnus bookmarks. Note: Gnus article bookmarks do not record region information.

* '''Bookmark+''' lets you bookmark URLs when you use W3M. By default, a new tab is opened for each such bookmark you visit, but you can alternatively open a separate W3M session for each visited bookmark.


=== Take Advantage of Icicles ===

If you also use '''[[Icicles]]''', then '''Bookmark+''' lets you use `S-delete' during completion to ''delete'' selected bookmarks on the fly.  That is, whenever you are asked for a bookmark name by any bookmark command, you can cycle among the completion candidates and hit `S-delete' to delete the bookmark whose name is the current candidate.  You can delete any number of bookmarks this way, during a single invocation of a bookmark command.

See also '''Icicles''' command `icicle-bookmark', which lets you navigate among bookmarks.  It too lets you use `S-delete' to delete bookmarks on the fly.


----
CategoryHypermedia CategoryPersistence



