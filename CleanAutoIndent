This page describes the extension 'Clean Auto Indent':
[url]https://github.com/pmarinov/clean-aindent[/url]

When automatic indentation is enabled, upon entering new line Emacs
will put the cursor under the first non-blank character of the
previous line. Because it is not designed to handle virtual spaces,
Emacs will do that by inserting the necessary amount of white-space
characters (tabs or spaces) so that the cursor can be positioned at
the desired location. The problem is that *if nothing is typed* at that
line, the block of spaces are *left hanging forever*.

For example, with auto-indentation enabled attempt to insert one blank
line between the two printf() lines. On the screenshot the cursor is
at the end of the first line.

[[image:AIndentEol]]

The natural inclination is to simply press RET.

[[image:AIndentNewLine]]

New line is inserted. Now walk away by pressing down arrow.

[[image:AIndentAbandon]]

The trailing white-space area is highlighted in red.

There are solutions already built in Emacs. These spaces
can be removed by invoking M-x `delete-trailing-whitespace', or even
making it automatic by attaching to `before-save-hook'.

The problem is that in such configuration all white spaces, including
*those from lines you didn't edit*, will be deleted. This is
inadmissible in an environment of collaborative development where one
central version control repository is shared. Your commits
*will have tons of unrelated changes*.

`clean-aindent.el' is a small extension that keeps track of the last
auto-indent operation and, if it is abandoned,
*would take care to trim down the abandoned white space* characters.

It will look like this after the line is abandoned:

[[image:AIndentClean]]

(PetarMarinov)
