Text you enter in the [[minibuffer]] ([[command]]s, input arguments) is typically added to a '''[::minibuffer history]''', also called '''[::input history]'''.

Different contexts use different minibuffer histories. For example, if you input a filename argument to a command such as `find-file', it is added to a history of filename inputs.

You can later retrieve a previously entered input from a minibuffer history and reuse it (perhaps editing it first). Use the following [[key sequence]]s to do that:

* `M-p', `up' (`previous-history-element') -- retrieve the input before the one currently in the minibuffer
* `M-n', `down' (`next-history-element') -- retrieve the input after the one currently in the minibuffer
* `M-r' (`previous-matching-history-element') -- Move to an earlier item in the minibuffer history that matches a [[regexp]] you enter.
* `M-s' (`next-matching-history-element') -- Move to a later item in the minibuffer history that matches a regexp you enter.

Naturally, these keys work only during minibuffer input.

`M-p' and `M-n' move one item through a history list each time you use them.


== Enhancements to Minibuffer History ==

=== Icicles ===

'''[[Icicles]]''' enhances minibuffer behavior in many ways. In particular, you can match a regexp against items in each of the minibuffer history lists, without having to search the list match by match. See [[Icicles - History Enhancements]]. 

You can also [[Icicles - Cycling Completions|cycle]] through the [[completion]] candidates for minibuffer input (including history items) using the arrow keys, and there is additional support for minibuffer completion. The standard minibuffer-history behavior (`M-n', `M-p') is still available as well.



=== Rebinding Cycling Keys to History Completing Keys ===

`M-s' and `M-r' are, by default, bound to `next-complete-history-element' and `previous-complete-history-element', respectively (see above). Alternatively, you might want to rebind `M-p', `M-n', `up' and `down' to the history completion commands:

 (define-key minibuffer-local-map (kbd "M-p") 'previous-complete-history-element)
 (define-key minibuffer-local-map (kbd "M-n") 'next-complete-history-element)
 (define-key minibuffer-local-map (kbd "<up>") 'previous-complete-history-element)
 (define-key minibuffer-local-map (kbd "<down>") 'next-complete-history-element)


----
CategoryCommands
CategoryCompletion
