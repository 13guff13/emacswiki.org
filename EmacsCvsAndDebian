How do you get Emacs from CVS on Debian? Or how do you get your newly built EmacsFromCVS and Debian to work well together?

== The Easy Way: emacs-snapshot ==

Emacs CVS has been available as ready-to-install Debian packages under the name emacs-snapshot since August 2005. Until March 2007, they were available in the official Debian archive but had to be removed for legal reasons, they can now be installed from http://emacs.orebokech.com/.

=== Debian etch, lenny, sid ===

See the instructions at http://emacs.orebokech.com/.

Only i386 and amd64 packages are provided, see instructions below to build packages from source on unsupported architectures.

See also the instructions at http://www.backports.org/
(http://packages.debian.org/lenny-backports/emacs23)

=== Ubuntu hardy, intrepid ===

Official Ubuntu packages can be obtained from the [https://launchpad.net/~ubuntu-elisp/+archive ubuntu-elisp PPA].
They are synced regularly to the official Ubuntu archive (in universe).

=== Building from source ===

http://emacs.orebokech.com/ only provides packages for i386 and amd64. Users of other architectures need to build and install from the Debian source package. Below is a step-by-step guide for this.

Add key:

{{{
# curl http://orebokech.com/Romain_Francoise.pgp | apt-key add -
}}}

Add this to /etc/apt/sources.list

{{{
deb http://emacs.orebokech.com sid main
deb-src http://emacs.orebokech.com sid main
}}}

Build it and install
{{{
# aptitude update
# aptitude build-dep emacs-snapshot
$ mkdir /tmp/build
$ cd /tmp/build
$ fakeroot apt-get source -b emacs-snapshot
}}}

Use dpkg to install these packages (first emacs-snapshot-common, then emacs-snapshot-common-bin, then emacs-snapshot or emacs-snapshot-nox) and enjoy. 

== Other ways ==

If you use a custom-built Emacs from CVS and want to be able to use elisp packages from Debian, or any derivative (e.g. Ubuntu), add this to your .emacs.el file:

 (let ((startup-file "/usr/share/emacs/site-lisp/debian-startup.el"))
    (if (and (or (not (fboundp 'debian-startup))
		 (not (boundp  'debian-emacs-flavor)))
	     (file-readable-p startup-file))
	(progn
	  (load-file startup-file)
	  (setq debian-emacs-flavor 'emacs)
	  (debian-startup debian-emacs-flavor)
	  (mapcar '(lambda (f)
		     (and (not (string= (substring f -3) "/.."))
			  (file-directory-p f) 
			  (add-to-list 'load-path f)))
		  (directory-files "/usr/share/emacs/site-lisp" t)))))

* Note that this should be done before you change load-path, otherwise Debian libraries will take precedence over your local libraries.

* Because this code uses the source of the elisp files, instead of compiling them, big packages like Gnus, Calc and BBDB may load slowly, depending on the speed of your machine.

See also: EmacsForDebian EmacsOnGnuLinux
----
CategoryBuilding
