After waking my laptop from sleep, [[rcirc]] is usually disconnected from the server, but doesn't know it.

The new ##/reconnect## command will force a reconnect.
Since it deletes the existing process, too, rcirc will reuse your buffers, which is the important part.
The code also attempts to connect to the same channels you were connected to before, irrespective of
`rcirc-startup-channels'.

<pre>
(eval-after-load 'rcirc
  '(defun-rcirc-command reconnect (arg)
     "Reconnect the server process."
     (interactive "i")
     (unless process
       (error "There's no process for this target"))
     (let* ((server (car (process-contact process)))
	    (port (process-contact process :service))
	    (nick (rcirc-nick process))
	    channels query-buffers)
       (dolist (buf (buffer-list))
	 (with-current-buffer buf
	   (when (eq process (rcirc-buffer-process))
	     (remove-hook 'change-major-mode-hook
			  'rcirc-change-major-mode-hook)
	     (if (rcirc-channel-p rcirc-target)
		 (setq channels (cons rcirc-target channels))
	       (setq query-buffers (cons buf query-buffers))))))
       (delete-process process)
       (rcirc-connect server port nick
		      rcirc-default-user-name
		      rcirc-default-user-full-name
		      channels))))
</pre>

----

On Emacs21 (21.4.1), ##process-contact## accepts only one parameter; I had to change line 6 to read:
<pre>
        (port (nth 1 (process-contact process)))
</pre>

----
CategoryChatClient [[rcirc]]
