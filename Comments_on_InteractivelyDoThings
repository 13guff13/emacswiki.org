Add your comment here.
I'm using Distel for my erlang development but the function that is used for completion is printing its output in an ibuffer. I would like to get it in the minibuffer with ido support instead, does anyone know of a way to do it?

Here is the code:

(defun erl-complete (node)
  "Complete the module or remote function name at point."
  (interactive (list (erl-target-node)))
  (let ((win (get-buffer-window "*Completions*" 0)))
    (if win (with-selected-window win (bury-buffer))))
  (let ((end (point))
	(beg (ignore-errors 
	       (save-excursion (backward-sexp 1)
			       ;; FIXME: see erl-goto-end-of-call-name
			       (when (eql (char-before) ?:)
				 (backward-sexp 1))
			       (point)))))
    (when beg
      (let* ((str (buffer-substring-no-properties beg end))
	     (buf (current-buffer))
	     (continuing (equal last-command (cons 'erl-complete str))))
	(setq this-command (cons 'erl-complete str))
	(if (string-match "^\\(.*\\):\\(.*\\)$" str)
	    ;; completing function in module:function
	    (let ((mod (intern (match-string 1 str)))
		  (pref (match-string 2 str))
		  (beg (+ beg (match-beginning 2))))
	      (erl-spawn
		(erl-send-rpc node 'distel 'functions (list mod pref))
		(&erl-receive-completions "function" beg end pref buf
					  continuing
					  #'erl-complete-sole-function)))
	  ;; completing just a module
	  (erl-spawn
	    (erl-send-rpc node 'distel 'modules (list str))
	    (&erl-receive-completions "module" beg end str buf continuing
				      #'erl-complete-sole-module)))))))

(defun &erl-receive-completions (what beg end prefix buf continuing sole)
  (let ((state (erl-async-state buf)))
    (erl-receive (what state beg end prefix buf continuing sole)
	((['rex ['ok completions]]
	  (when (equal state (erl-async-state buf))
	    (with-current-buffer buf
	      (erl-complete-thing what continuing beg end prefix
				  completions sole))))
	 (['rex ['error reason]]
	  (message "Error: %s" reason))
	 (other
	  (message "Unexpected reply: %S" other))))))

-- SpaceOgre 2013-06-18 12:28 UTC


----

Avoir Cable gives a Elite Dish Joiner Kit having a powerful 8.<a href=http://www.reviewbusters.org/>ヴィヴィアンウエストウッド</a>,<a href=http://www.cedarcrossingtownhomes.com/>グレゴリー リュック</a>,<a href=http://www.byamandamae.com/>ダナー ブーツ</a>,5 amplifiers and 10, 000 revoltions per minute. This particular joiner has many features in which make simpler the subscribing to course of action, such as: an exact micro height-adjustment control to maintain cornbread just based, plus a 1in I. G. <a href=http://www.reviewbusters.org/>ヴィヴィアンウエストウッド バッグ 2013</a>,<a href=http://www.byamandamae.com/>ダナー ライトdanner light</a>, (outer diameter) dust slot that works along with normal luggage as well as can just hook up to vacuum pressure. The particular DW682K has a fence point connected with zero to135 levels using a optimistic adaptable stop at ninety diplomas; ヴィヴィアンウエストウッド アウトレット http://www.reviewbusters.org/,グレゴリー 店舗 http://www.cedarcrossingtownhomes.com/,ダナー ライトdanner light http://www.byamandamae.com/,in addition , the particular bale manage is usually mounted on often the barrier (rather versus the motor) to get greater steadiness in addition to control when chopping. Often the joiner also offers a lock-on trigger to get continuous employ along with a supremely precise (at any kind of angle) hight degree to be able to specifically calculate jobs.

-- [http://www.reviewbusters.org/
 totttohardy] 2013-12-10 00:43 UTC

