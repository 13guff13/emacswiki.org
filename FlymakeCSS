Get http://www.w3.org/QA/Tools/css-validator/css-validator.jar create a directory named 'lib' in the same directory.
Copy to the 'lib' dir the following jars:

* commons-collections-3.2.1.jar
* jigsaw.jar                  
* velocity-1.6.1.jar           
* xml-apis.jar
* commons-lang-2.4.jar          
* tagsoup-1.2.jar              
* xercesImpl.jar

From:

* http://jigsaw.w3.org/Distrib/jigsaw_2.2.6.tar.gz
* http://www.apache.org/dist/commons/collections/binaries/commons-collections-3.2.1-bin.tar.gz
* http://www.apache.org/dist/commons/lang/binaries/commons-lang-2.4-bin.tar.gz
* http://archive.apache.org/dist/velocity/engine/1.6.1/velocity-1.6.1.tar.gz
* http://www.apache.org/dist/xerces/j/Xerces-J-bin.2.9.1.tar.gz
* http://home.ccil.org/~cowan/XML/tagsoup/tagsoup-1.2.jar

Test validating some CSS file by running:

    java -jar css-validator.jar file:somecssfile.css

[new]
It did not work, I get:

  C:\DL\programs\css-valid>java -jar css-validator.jar c:\EmacsW32\nxhtml\nxhtml\doc\wd\grapes\nxhtml-grapes.css
  Exception in thread "main" java.lang.NoClassDefFoundError: org/w3c/tools/resources/ProtocolException
  Caused by: java.lang.ClassNotFoundException: org.w3c.tools.resources.ProtocolException
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClassInternal(Unknown Source)
  Could not find the main class: org.w3c.css.css.CssValidator. Program will exit.

Eh, it worked when I downloaded the other libraries too...

[new]
If it works, add this to a suitable place loaded by emacs:
{{{
;; Edit this
(defconst css-validator "java -jar ~/bin/css-validator.jar")

(defun flymake-css-init ()
  (let* ((temp-file   (flymake-init-create-temp-buffer-copy
                       'flymake-create-temp-inplace))
         (local-file  (file-relative-name
                       temp-file
                       (file-name-directory buffer-file-name))))
    (list css-validator (list "-output gnu" (concat "file:" local-file)))))

(push '(".+\\.css$" flymake-css-init) flymake-allowed-file-name-masks)

(push '("^file:\\([^:]+\\):\\([^:]+\\):\\(.*\\)" 1 2 nil 3) flymake-err-line-patterns)
}}}

----
FlyMake

----

Thanks for this concise and complete tutorial on *installing the W3 CSS Validator.*  It took me about 10 minutes to install it, following these instructions :)

One note though: on *Windows,* I had trouble with

   (defconst css-validator "java -jar ~/path/to/css-validator.jar")

It appears that perhaps Java does not like all the arguments being passed as a single string[https://www.projectcaroline.net/main/index.php?q=node/208].  Maybe this is a Windows-specific thing?  

Anyway I wound up leaving out the line above.  Instead, I changed the last line of the first stanza of the config as follows:

    (defun flymake-css-init ()
      (let* ((temp-file   (flymake-init-create-temp-buffer-copy
                           'flymake-create-temp-inplace))
             (local-file  (file-relative-name
                           temp-file
                           (file-name-directory buffer-file-name))))
        ;; Edit this line
        (list "java" (list "-jar" "c:/path/to/css-validator.jar" "-output" "gnu" (concat "file:" local-file)))))

Otherwise everything worked perfectly, thanks again.  &mdash;[[NoahSussman]]

[new:NoahSussman:2009-09-11 04:07 UTC]


